# 요구사항
- 기능 목록
    - 회원 기능
        - 회원 등록
        - 회원 조회
    - 상품 기능
        - 상품 등록
        - 상품 수정
        - 상품 조회
    - 주문 기능 
        - 상품 주문
        - 주문 내역 조회
        - 주문 취소
    - 기타 요구사항
        - 상품은 재고 관리가 필요하다.
        - 상품의 종류는 도서, 음반, 영화가 있다. 상품을 카테고리로 구분할 수 있다.
        - 상품 주문시 배송 정보를 입력할 수 있다.

# 도메인 모델과 테이블 설계
1. 회원 1 : N 주문
2. 주문 1 : 1 배송
3. 주문 1 : 다 주문상품 다 : 1 상품
4. 상품 다 : 다 카테고리
5. 상품 (앨범, 책, 영화)

## 엔티티 클래스 개발
- Getter의 경우는 모두 열어두는 것이 편리하다.
- Setter는 열어둘경우 변경에 대해 유지보수가 힘들기 때문에 setter를 사용하지 않고, 메서드를 별도로 제공하는게 좋다.
- 실무에서는 @ManyToMany 쓰지말자 중간테이블 관리가 힘들다 (값을 추가할 수 없다.)
- @Embedded -> 값타입은 생성자를 사용하고 수정자를 쓰지말자( 변경이 불가능해야 한다. )
    - 기본 생성자를 사용해야한다 (jpa 스팩) -> 기본 생성자의 접근 권한을 protected로 해주는 게 좋다.
- jpa가 만들어준 sql ddl을 그대로 사용하지말고 수정해서 사용하자

## 엔티티 설계 주의점
1. 엔티티에는 Setter를 사용하지 말자.
    - 변경 포인트가 많아 유지보수가 어렵다
2. 모든 연관관계는 지연로딩을 설정한다.
    - 즉시로딩(EAGER)은 예측이 어렵고, 어떤 sql이 실행될지 추적하기 어렵다. 특히 jpql을 사용할떄 N+1의 문제가 생긴다.
    - 실무에서 모든 연관관계는 (LAZY)로 설정해야 한다.
    - 함꼐 조회할때는 fetch join 또는 엔티티 그래프 기능을 사용한다.
    - @XToOne은 기본이 EAGER이기 때문에 필히 변경해줘야 한다.
3. 컬렉션 필드는 필드 정의때 초기화해주자
    - `null`에서 안전하다
    - 하이버네이트가 컬렉션을 내장 컬렉션으로 감싸서 변경하기 때문에 내부 메커니즘에 문제가 생긴다
    - 컬렉션을 대체 하지마라
4. 테이블, 컬럼명 생선 기본 전략
    - spring boot
        - camel case를 언더스코어로 바꿈
        - .을 _로
        - SpringPhysicalNamingStrategy
5. cascade
    - type.all -> 생명주기를 같이한다.
    - 참조하는게 다른 곳에서 쓰지 않을때 써야함.

## test에서 spring data source를 적어주지 않는다면 테스트를 돌릴 때 기본적으로 memory mode로 올려준다.